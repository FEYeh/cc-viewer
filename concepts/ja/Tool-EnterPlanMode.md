# EnterPlanMode

## 定義

Claude Code を計画モードに切り替え、実装前にコードベースを探索し方針を設計するために使用します。

## パラメータ

パラメータなし。

## 使用シナリオ

**適している場合：**
- 新機能の実装——アーキテクチャの判断が必要
- 複数の実行可能な方針がある——ユーザーの選択が必要
- コード変更が既存の動作や構造に影響する
- 複数ファイルの変更——2〜3ファイル以上に及ぶ可能性
- 要件が不明確——まず探索して範囲を理解する必要がある
- ユーザーの好みが重要——実装に複数の合理的な方向性がある

**適していない場合：**
- 1行または少数行の修正（タイプミス、明らかなバグ）
- ユーザーが非常に具体的な指示を出している
- 純粋な調査/探索タスク——Task（Explore タイプ）を使用すべき

## 計画モードでの動作

計画モードに入ると、Claude Code は：
1. Glob、Grep、Read ツールを使用してコードベースを深く探索
2. 既存のパターンとアーキテクチャを理解
3. 実装方針を設計
4. 方針をユーザー承認に提出
5. 必要に応じて AskUserQuestion で確認
6. 方針が準備できたら ExitPlanMode で終了

## 注意事項

- このツールは計画モードに入るためにユーザーの同意が必要
- 計画が必要かどうか不確かな場合は、計画する方に傾ける——事前の擦り合わせは手戻りよりも良い

## cc-viewer での意義

EnterPlanMode 呼び出しはリクエストログで `tool_use` content block として表示されます。計画モードに入った後のリクエストシーケンスは通常、探索的なツール呼び出し（Glob、Grep、Read）が中心となり、ExitPlanMode が呼び出されるまで続きます。
