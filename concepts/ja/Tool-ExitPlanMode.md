# ExitPlanMode

## 定義

計画モードを終了し、方針をユーザー承認に提出します。方針の内容は以前書き込まれた計画ファイルから読み取られます。

## パラメータ

| パラメータ | 型 | 必須 | 説明 |
|------------|------|------|------|
| `allowedPrompts` | array | いいえ | 実装方針に必要な権限の説明リスト |

`allowedPrompts` 配列の各要素：

| フィールド | 型 | 必須 | 説明 |
|------------|------|------|------|
| `tool` | enum | はい | 適用するツール、現在は `Bash` のみサポート |
| `prompt` | string | はい | 操作のセマンティック説明（例："run tests"、"install dependencies"） |

## 使用シナリオ

**適している場合：**
- 計画モードで方針が完成し、ユーザー承認に提出する準備ができた
- コードを書く必要がある実装タスクにのみ使用

**適していない場合：**
- 純粋な調査/探索タスク——計画モードを終了する必要はない
- ユーザーに「方針でよろしいですか？」と聞きたい場合——これがまさにこのツールの機能であり、AskUserQuestion で聞かないこと

## 注意事項

- このツールは方針の内容をパラメータとして受け取らない——以前書き込まれた計画ファイルから読み取る
- ユーザーは計画ファイルの内容を見て承認する
- このツールを呼び出す前に AskUserQuestion で「方針は大丈夫ですか」と聞かないこと。重複になる
- 質問の中で「計画」に言及しないこと。ユーザーは ExitPlanMode の前に計画の内容を見ることができないため

## cc-viewer での意義

ExitPlanMode 呼び出しは計画フェーズの終了を示します。リクエストログでは、この呼び出し以降のリクエストは通常、実装的な操作（Edit、Write、Bash など）に移行します。
