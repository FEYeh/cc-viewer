# TaskUpdate

## คำจำกัดความ

อัปเดตสถานะ เนื้อหา หรือความสัมพันธ์การพึ่งพาของงานในรายการงาน

## พารามิเตอร์

| พารามิเตอร์ | ประเภท | จำเป็น | คำอธิบาย |
|------|------|------|------|
| `taskId` | string | ใช่ | ID ของงานที่จะอัปเดต |
| `status` | enum | ไม่ | สถานะใหม่: `pending` / `in_progress` / `completed` / `deleted` |
| `subject` | string | ไม่ | หัวข้อใหม่ |
| `description` | string | ไม่ | คำอธิบายใหม่ |
| `activeForm` | string | ไม่ | ข้อความรูปแบบกำลังดำเนินการที่แสดงเมื่อกำลังทำงาน |
| `owner` | string | ไม่ | ผู้รับผิดชอบงานใหม่ (ชื่อ agent) |
| `metadata` | object | ไม่ | ข้อมูลเมตาที่จะรวม (ตั้งเป็น null เพื่อลบคีย์) |
| `addBlocks` | string[] | ไม่ | รายการ ID ของงานที่ถูกบล็อกโดยงานนี้ |
| `addBlockedBy` | string[] | ไม่ | รายการ ID ของงานเงื่อนไขก่อนหน้าที่บล็อกงานนี้ |

## การเปลี่ยนสถานะ

```
pending → in_progress → completed
```

`deleted` สามารถเปลี่ยนจากสถานะใดก็ได้ ลบงานอย่างถาวร

## สถานการณ์การใช้งาน

**เหมาะสำหรับ:**
- ทำเครื่องหมายงานเป็น `in_progress` เมื่อเริ่มทำงาน
- ทำเครื่องหมายงานเป็น `completed` หลังจากทำงานเสร็จ
- ตั้งค่าความสัมพันธ์การพึ่งพาระหว่างงาน
- อัปเดตเนื้อหางานเมื่อข้อกำหนดเปลี่ยนแปลง

**กฎสำคัญ:**
- ทำเครื่องหมายเป็น `completed` เฉพาะเมื่อทำงานเสร็จสมบูรณ์เท่านั้น
- คงสถานะ `in_progress` เมื่อพบข้อผิดพลาดหรือการบล็อก
- ห้ามทำเครื่องหมายเป็น `completed` เมื่อการทดสอบล้มเหลว การดำเนินงานไม่สมบูรณ์ หรือมีข้อผิดพลาดที่ยังไม่ได้แก้ไข

## ข้อควรระวัง

- ก่อนอัปเดต ควรรับสถานะล่าสุดของงานผ่าน TaskGet เพื่อหลีกเลี่ยงข้อมูลที่ล้าสมัย
- หลังจากทำงานเสร็จ เรียก TaskList เพื่อค้นหางานถัดไปที่พร้อมทำ

## ความสำคัญใน cc-viewer

TaskUpdate เป็นการดำเนินการจัดการงานภายใน ไม่สร้างคำร้องขอ API อิสระ
