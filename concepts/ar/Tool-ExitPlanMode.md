# ExitPlanMode

## التعريف

الخروج من وضع التخطيط وتقديم الخطة للمستخدم للموافقة. يُقرأ محتوى الخطة من ملف الخطة المكتوب مسبقاً.

## المعاملات

| المعامل | النوع | مطلوب | الوصف |
|---------|-------|-------|-------|
| `allowedPrompts` | array | لا | قائمة أوصاف الأذونات المطلوبة لخطة التنفيذ |

كل عنصر في مصفوفة `allowedPrompts`:

| الحقل | النوع | مطلوب | الوصف |
|-------|-------|-------|-------|
| `tool` | enum | نعم | الأداة المعنية، حالياً يُدعم فقط `Bash` |
| `prompt` | string | نعم | وصف دلالي للعملية (مثل "run tests"، "install dependencies") |

## سيناريوهات الاستخدام

**مناسب للاستخدام:**
- اكتملت الخطة في وضع التخطيط وجاهزة لتقديمها لموافقة المستخدم
- يُستخدم فقط لمهام التنفيذ التي تتطلب كتابة كود

**غير مناسب للاستخدام:**
- مهام البحث/الاستكشاف البحتة — لا حاجة للخروج من وضع التخطيط
- السؤال "هل الخطة مقبولة؟" — هذا بالضبط وظيفة هذه الأداة، لا تستخدم AskUserQuestion لذلك

## ملاحظات

- هذه الأداة لا تقبل محتوى الخطة كمعامل — تقرأ من ملف الخطة المكتوب مسبقاً
- سيرى المستخدم محتوى ملف الخطة للموافقة
- لا تستخدم AskUserQuestion قبل استدعاء هذه الأداة للسؤال "هل الخطة مقبولة"، فهذا تكرار
- لا تذكر "الخطة" في الأسئلة، لأن المستخدم لا يرى محتوى الخطة قبل ExitPlanMode

## الأهمية في cc-viewer

يمثل استدعاء ExitPlanMode نهاية مرحلة التخطيط. في سجل الطلبات، تتحول الطلبات بعد هذا الاستدعاء عادة إلى عمليات تنفيذية (Edit، Write، Bash إلخ).
