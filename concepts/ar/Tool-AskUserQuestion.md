# AskUserQuestion

## التعريف

طرح أسئلة على المستخدم أثناء التنفيذ، للحصول على توضيحات أو التحقق من الافتراضات أو طلب اتخاذ قرارات.

## المعاملات

| المعامل | النوع | مطلوب | الوصف |
|---------|-------|-------|-------|
| `questions` | array | نعم | قائمة الأسئلة (1-4 أسئلة) |
| `answers` | object | لا | الإجابات التي جمعها المستخدم |
| `annotations` | object | لا | ملاحظات لكل سؤال (مثل ملاحظات معاينة الاختيارات) |
| `metadata` | object | لا | بيانات وصفية للتتبع والتحليل |

كل كائن `question`:

| الحقل | النوع | مطلوب | الوصف |
|-------|-------|-------|-------|
| `question` | string | نعم | نص السؤال الكامل، يجب أن ينتهي بعلامة استفهام |
| `header` | string | نعم | تسمية قصيرة (12 حرفاً كحد أقصى)، تُعرض كشريحة تسمية |
| `options` | array | نعم | 2-4 خيارات |
| `multiSelect` | boolean | نعم | هل يُسمح بالاختيار المتعدد |

كل كائن `option`:

| الحقل | النوع | مطلوب | الوصف |
|-------|-------|-------|-------|
| `label` | string | نعم | نص عرض الخيار (1-5 كلمات) |
| `description` | string | نعم | وصف الخيار |
| `markdown` | string | لا | محتوى المعاينة (للمقارنة المرئية لتخطيطات ASCII ومقتطفات الكود وغيرها) |

## سيناريوهات الاستخدام

**مناسب للاستخدام:**
- جمع تفضيلات أو متطلبات المستخدم
- توضيح التعليمات الغامضة
- الحصول على قرارات أثناء التنفيذ
- تقديم خيارات اتجاهية للمستخدم

**غير مناسب للاستخدام:**
- السؤال "هل الخطة مقبولة؟" — يجب استخدام ExitPlanMode

## ملاحظات

- يمكن للمستخدم دائماً اختيار "Other" لتقديم إدخال مخصص
- يُوضع الخيار الموصى به في المقام الأول مع إضافة "(Recommended)" في نهاية label
- معاينة `markdown` تدعم فقط أسئلة الاختيار الفردي
- الخيارات التي تحتوي على `markdown` تتحول إلى تخطيط جنباً إلى جنب
- في وضع التخطيط، تُستخدم لتوضيح المتطلبات قبل تحديد الخطة

## الأهمية في cc-viewer

يظهر استدعاء AskUserQuestion في سجل الطلبات ككتلة محتوى `tool_use`، تحتوي على تعريفات الأسئلة والخيارات. تظهر إجابات المستخدم في سجل الرسائل للطلبات اللاحقة.
